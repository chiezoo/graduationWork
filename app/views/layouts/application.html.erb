<!DOCTYPE html>
<html>
  <head>
    <title>おくすり記録</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
  </head>

  <body style="margin: 0; font-family: 'Helvetica Neue', Arial, 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', Meiryo, sans-serif; background-color: #f4f4f4;">
    <header style="padding: 15px 30px; background-color: white; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;">
      <h1 style="margin: 0; font-size: 1.2rem;">
        <%= link_to "おくすり記録", root_path, style: "text-decoration: none; color: #333; font-weight: bold;" %>
      </h1>
      
      <nav style="display: flex; align-items: center; gap: 15px;">
        <% if user_signed_in? %>
          
          <%# --- 管理者画面リンクの追加 --- %>
          <% if current_user.respond_to?(:admin?) && current_user.admin? %>
            <%= link_to "管理者画面", "/admin/users", style: "
              color: #3333CC; 
              text-decoration: none; 
              font-size: 0.85rem; 
              border: 2px solid #3333CC; 
              padding: 7px 14px; 
              border-radius: 6px; 
              font-weight: bold;
              white-space: nowrap;
            " %>
          <% end %>

          <span style="font-size: 0.9rem; color: #555;">ログイン中: <%= current_user.email %></span>
          
          <%= link_to "ログアウト", destroy_user_session_path, data: { turbo_method: :delete }, style: "
            color: #ff4d4d; 
            text-decoration: none; 
            font-size: 0.85rem; 
            border: 1px solid #ff4d4d; 
            padding: 7px 14px; 
            border-radius: 6px; 
            font-weight: bold;
            white-space: nowrap;
          " %>
          
        <% else %>
          <%= link_to "新規登録", new_user_registration_path, style: "text-decoration: none; color: white; background-color: #333; padding: 8px 18px; border-radius: 6px; font-size: 0.85rem; font-weight: bold;" %>
          <%= link_to "ログイン", new_user_session_path, style: "text-decoration: none; color: white; background-color: #333; padding: 8px 18px; border-radius: 6px; font-size: 0.85rem; font-weight: bold;" %>
        <% end %>
      </nav>
    </header>

    <main>
      <%= yield %>
    </main>
  </body>
</html>
